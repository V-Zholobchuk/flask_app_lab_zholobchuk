{% extends 'base.html' %}
{% block title %}Profile{% endblock %}
{% block content %}

<div class="profile-section theme-switcher">
    {% set current_theme = request.cookies.get('theme', 'light') %}
    {% if current_theme == 'light' %}
    <a href="{{ url_for('users.change_theme', theme='dark') }}" class="btn btn-dark">
        <i class="bi bi-moon-fill"></i>
    </a>
    {% else %}
    <a href="{{ url_for('users.change_theme', theme='light') }}" class="btn btn-light">
        <i class="bi bi-sun-fill"></i>
    </a>
    {% endif %}
</div>
<h2>
    Ласкаво просимо, {{ username }}!
    <a href="{{ url_for('users.logout') }}" class="btn btn-danger btn-sm logout-btn">Вийти</a>
</h2>

<div class="profile-section">
    <h3>Керування Кукі</h3>

    <h4>Додати кукі:</h4>
    <form method="POST" action="{{ url_for('users.add_cookie') }}" class="cookie-form">
        <div>
            <label for="cookie_key">Ключ:</label>
            <input type="text" name="cookie_key" id="cookie_key" class="form-control" required>
        </div>
        <div>
            <label for="cookie_value">Значення:</label>
            <input type="text" name="cookie_value" id="cookie_value" class="form-control" required>
        </div>
        <div>
            <label for="expiry_days">Термін дії (днів):</label>
            <input type="number" name="expiry_days" id="expiry_days" class="form-control" min="1">
        </div>
        <button type="submit" class="btn btn-primary">Додати кукі</button>
    </form>

    <h4>Видалити кукі за ключем:</h4>
    <form method="POST" action="{{ url_for('users.delete_cookie') }}" class="cookie-form">
        <div>
            <label for="cookie_key_to_delete">Ключ:</label>
            <input type="text" name="cookie_key_to_delete" id="cookie_key_to_delete" class="form-control" required>
        </div>
        <button type="submit" class="btn btn-warning">Видалити кукі</button>
    </form>

    <h4>Видалити всі кукі:</h4>
    <form method="POST" action="{{ url_for('users.delete_all_cookies') }}">
        <button type="submit" class="btn btn-danger">Видалити всі мої кукі</button>
    </form>

    <hr>

    <h3>Список всіх кукі:</h3>
    <table class="table table-striped table-bordered cookie-table">
        <thead>
            <tr>
                <th>Ключ</th>
                <th>Значення</th>
            </tr>
        </thead>
        <tbody>
            {% if cookies %}
            {% for key, value in cookies.items() %}
            <tr>
                <td>{{ key }}</td>
                <td>{{ value | truncate(80) }}</td>
            </tr>
            {% endfor %}
            {% else %}
            <tr>
                <td colspan="2">Кукі не знайдено.</td>
            </tr>
            {% endif %}
        </tbody>
    </table>
</div>



{% endblock %}